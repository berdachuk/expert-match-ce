# Development Configuration with EPAM DIAL
# This file is gitignored and should be customized for your dev setup
# 
# Configuration:
# - LLM Inference: EPAM DIAL (Azure OpenAI-compatible provider)
# - Embeddings: EPAM DIAL (Azure OpenAI-compatible provider)
# - Reranking: EPAM DIAL (Azure OpenAI-compatible provider)
#
# To use this configuration, run with: --spring.profiles.active=dev
# Or set: export SPRING_PROFILES_ACTIVE=dev
#
# Environment Variables Required:
# - AZURE_OPENAI_API_KEY: EPAM DIAL API key (required)
# - AZURE_OPENAI_ENDPOINT: EPAM DIAL endpoint (default: https://ai-proxy.lab.berdachuk.com)
# - DIAL_MODEL_NAME: Model name for LLM inference (default: gpt-4)
# - OPENAI_API_TYPE: Should be "azure" (default: azure)
# - OPENAI_API_VERSION: Azure API version (default: 2023-03-15-preview)

spring:
  # Spring AI Configuration for EPAM DIAL
  ai:
    # OpenAI-compatible provider configuration (EPAM DIAL uses Azure OpenAI format)
    openai:
      # EPAM DIAL API key (uses AZURE_OPENAI_API_KEY environment variable)
      api-key: ${AZURE_OPENAI_API_KEY:${EPAM_DIAL_API_KEY:}}
      # EPAM DIAL base URL (Azure OpenAI-compatible endpoint)
      # Based on aist-tool-networking: https://ai-proxy.lab.berdachuk.com
      # Spring AI OpenAI client works with Azure OpenAI endpoints
      base-url: ${AZURE_OPENAI_ENDPOINT:${EPAM_DIAL_BASE_URL:https://ai-proxy.lab.berdachuk.com}}
      chat:
        options:
          # EPAM DIAL model for LLM inference
          # Model name should be configured based on available EPAM DIAL models
          model: ${DIAL_MODEL_NAME:${EPAM_DIAL_CHAT_MODEL:gpt-4}}
          temperature: ${EPAM_DIAL_TEMPERATURE:0.7}
          max-tokens: ${EPAM_DIAL_MAX_TOKENS:4096}
      embedding:
        options:
          # EPAM DIAL model for embeddings
          # Model name should be configured based on available EPAM DIAL models
          model: ${EPAM_DIAL_EMBEDDING_MODEL:text-embedding-3-large}
          # Embedding dimensions (adjust based on EPAM DIAL model capabilities)
          dimensions: ${EPAM_DIAL_EMBEDDING_DIMENSIONS:1536}
    
    # Note: For reranking, EPAM DIAL may use chat models for relevance scoring
    # Configure reranking model via expertmatch.retrieval.reranking configuration below

# Application-specific configuration
expertmatch:
  retrieval:
    reranking:
      enabled: true
      provider: openai  # Use OpenAI-compatible provider (EPAM DIAL)
      # EPAM DIAL model for reranking (typically uses a chat model for relevance scoring)
      model: ${EPAM_DIAL_RERANKING_MODEL:${DIAL_MODEL_NAME:${EPAM_DIAL_CHAT_MODEL:gpt-4}}}
      # OpenAI-compatible reranking configuration (EPAM DIAL)
      openai:
        api-key: ${AZURE_OPENAI_API_KEY:${EPAM_DIAL_API_KEY:}}
        base-url: ${AZURE_OPENAI_ENDPOINT:${EPAM_DIAL_BASE_URL:https://ai-proxy.lab.berdachuk.com}}
        model: ${EPAM_DIAL_RERANKING_MODEL:${DIAL_MODEL_NAME:${EPAM_DIAL_CHAT_MODEL:gpt-4}}}
        temperature: ${EPAM_DIAL_RERANKING_TEMPERATURE:0.1}  # Lower temperature for reranking

# EPAM DIAL Configuration (for reference, matches aist-tool-networking)
berdachuk:
  dial:
    api-key: ${AZURE_OPENAI_API_KEY:${EPAM_DIAL_API_KEY:}}
    base-url: ${AZURE_OPENAI_ENDPOINT:${EPAM_DIAL_BASE_URL:https://ai-proxy.lab.berdachuk.com}}
    chat-model: ${DIAL_MODEL_NAME:${EPAM_DIAL_CHAT_MODEL:gpt-4}}
    embedding-model: ${EPAM_DIAL_EMBEDDING_MODEL:text-embedding-3-large}
    reranking-model: ${EPAM_DIAL_RERANKING_MODEL:${DIAL_MODEL_NAME:${EPAM_DIAL_CHAT_MODEL:gpt-4}}}

# Configuration Notes:
# - EPAM DIAL is an Azure OpenAI-compatible provider (proxy service)
# - The base URL for EPAM DIAL is: https://ai-proxy.lab.berdachuk.com (from aist-tool-networking)
# - EPAM DIAL uses Azure OpenAI API format with Bearer token authentication
# - Environment variables (matching aist-tool-networking):
#   * AZURE_OPENAI_API_KEY: EPAM DIAL API key (required)
#   * AZURE_OPENAI_ENDPOINT: EPAM DIAL endpoint (default: https://ai-proxy.lab.berdachuk.com)
#   * DIAL_MODEL_NAME: Model name for LLM (default: gpt-4)
#   * OPENAI_API_TYPE: Should be "azure" (for Azure OpenAI format)
#   * OPENAI_API_VERSION: Azure API version (e.g., 2023-03-15-preview)
# - Spring AI's OpenAI client can work with Azure OpenAI endpoints
# - All models (inference, embedding, reranking) use the same API key and base URL
# - Model names should be configured based on available EPAM DIAL models
# - For reranking, EPAM DIAL typically uses a chat model for relevance scoring
# - Requires EPAM VPN access to use DIAL API

